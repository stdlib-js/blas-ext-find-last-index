{"version":3,"file":"index.mjs","sources":["../lib/base.js","../lib/main.js","../lib/assign.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport dtypes from '@stdlib/ndarray-dtypes';\nimport gfindLastIndex from '@stdlib/blas-ext-base-ndarray-gfind-last-index';\nimport factory from '@stdlib/ndarray-base-unary-reduce-strided1d-dispatch-by-factory';\n\n\n// VARIABLES //\n\nvar idtypes = dtypes( 'all' );\nvar odtypes = dtypes( 'integer_index_and_generic' );\nvar policies = {\n\t'output': 'integer_index_and_generic',\n\t'casting': 'none'\n};\nvar table = {\n\t'default': gfindLastIndex\n};\n\n\n// MAIN //\n\n/**\n* Returns the index of the last element along an ndarray dimension which passes a test implemented by a predicate function.\n*\n* @private\n* @name findLastIndex\n* @type {Function}\n* @param {ndarrayLike} x - input ndarray\n* @param {Options} [options] - function options\n* @param {IntegerArray} [options.dims] - list of dimensions over which to perform operation\n* @param {*} [options.dtype] - output ndarray data type\n* @param {Function} clbk - callback function\n* @param {*} [thisArg] - callback execution context\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension indices must not exceed input ndarray bounds\n* @throws {RangeError} number of dimension indices must not exceed the number of input ndarray dimensions\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* function isEven( v ) {\n*     return v % 2.0 === 0.0;\n* }\n*\n* // Create a data buffer:\n* var xbuf = [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ];\n*\n* // Define the shape of the input array:\n* var sh = [ 6 ];\n*\n* // Define the array strides:\n* var sx = [ 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'generic', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = findLastIndex( x, isEven );\n* // returns <ndarray>\n*\n* var idx = out.get();\n* // returns 5\n*/\nvar findLastIndex = factory( table, [ idtypes ], odtypes, policies );\n\n\n// EXPORTS //\n\nexport default findLastIndex;\n\n// exports: { \"assign\": \"findLastIndex.assign\" }\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport hasOwnProp from '@stdlib/assert-has-own-property';\nimport isFunction from '@stdlib/assert-is-function';\nimport isPlainObject from '@stdlib/assert-is-plain-object';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport ndims from '@stdlib/ndarray-ndims';\nimport format from '@stdlib/error-tools-fmtprodmsg';\nimport base from './base.js';\n\n\n// MAIN //\n\n/**\n* Returns the index of the last element along an ndarray dimension which passes a test implemented by a predicate function.\n*\n* @param {ndarrayLike} x - input ndarray\n* @param {Options} [options] - function options\n* @param {integer} [options.dim=-1] - dimension over which to perform operation\n* @param {boolean} [options.keepdims=false] - boolean indicating whether the reduced dimensions should be included in the returned ndarray as singleton dimensions\n* @param {*} [options.dtype] - output ndarray data type\n* @param {Function} clbk - callback function\n* @param {*} [thisArg] - callback execution context\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} callback argument must be a function\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension index must not exceed input ndarray bounds\n* @throws {RangeError} first argument must have at least one dimension\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* function isEven( v ) {\n*     return v % 2.0 === 0.0;\n* }\n*\n* // Create a data buffer:\n* var xbuf = [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ];\n*\n* // Define the shape of the input array:\n* var sh = [ 2, 3 ];\n*\n* // Define the array strides:\n* var sx = [ 3, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'generic', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = findLastIndex( x, isEven );\n* // returns <ndarray>\n*\n* var arr = ndarray2array( out );\n* // returns [ 1, 2 ]\n*/\nfunction findLastIndex( x ) {\n\tvar hasOptions;\n\tvar options;\n\tvar nargs;\n\tvar opts;\n\tvar ctx;\n\tvar cb;\n\n\tnargs = arguments.length;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null4f', x ) );\n\t}\n\t// Initialize an options object:\n\topts = {\n\t\t'dims': [ -1 ], // default behavior is to perform a reduction over the last dimension\n\t\t'keepdims': false\n\t};\n\n\t// Initialize a flag indicating whether an `options` argument was provided:\n\thasOptions = false;\n\n\t// Case: findLastIndex( x, clbk )\n\tif ( nargs <= 2 ) {\n\t\tcb = arguments[ 1 ];\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null2H', cb ) );\n\t\t}\n\t}\n\t// Case: findLastIndex( x, ???, ??? )\n\telse if ( nargs === 3 ) {\n\t\t// Case: findLastIndex( x, clbk, thisArg )\n\t\tif ( isFunction( arguments[ 1 ] ) ) {\n\t\t\tcb = arguments[ 1 ];\n\t\t\tctx = arguments[ 2 ];\n\t\t}\n\t\t// Case: findLastIndex( x, options, clbk )\n\t\telse {\n\t\t\toptions = arguments[ 1 ];\n\t\t\tcb = arguments[ 2 ];\n\t\t\tif ( !isFunction( cb ) ) {\n\t\t\t\tthrow new TypeError( format( 'null3N', cb ) );\n\t\t\t}\n\t\t\thasOptions = true;\n\t\t}\n\t}\n\t// Case: findLastIndex( x, options, clbk, thisArg )\n\telse {\n\t\toptions = arguments[ 1 ];\n\t\tcb = arguments[ 2 ];\n\t\tctx = arguments[ 3 ];\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null3N', cb ) );\n\t\t}\n\t\thasOptions = true;\n\t}\n\tif ( hasOptions ) {\n\t\tif ( !isPlainObject( options ) ) {\n\t\t\tthrow new TypeError( format( 'null2V', options ) );\n\t\t}\n\t\t// Resolve provided options...\n\t\tif ( hasOwnProp( options, 'dim' ) ) {\n\t\t\topts.dims[ 0 ] = options.dim;\n\t\t}\n\t\tif ( hasOwnProp( options, 'keepdims' ) ) {\n\t\t\topts.keepdims = options.keepdims;\n\t\t}\n\t\tif ( hasOwnProp( options, 'dtype' ) ) {\n\t\t\topts.dtype = options.dtype;\n\t\t}\n\t}\n\tif ( ndims( x ) < 1 ) {\n\t\tthrow new RangeError( 'invalid argument. First argument must have at least one dimension.' );\n\t}\n\treturn base( x, opts, cb, ctx );\n}\n\n\n// EXPORTS //\n\nexport default findLastIndex;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport hasOwnProp from '@stdlib/assert-has-own-property';\nimport isFunction from '@stdlib/assert-is-function';\nimport isPlainObject from '@stdlib/assert-is-plain-object';\nimport isndarrayLike from '@stdlib/assert-is-ndarray-like';\nimport ndims from '@stdlib/ndarray-ndims';\nimport format from '@stdlib/error-tools-fmtprodmsg';\nimport { assign as base } from './base.js';\n\n\n// MAIN //\n\n/**\n* Returns the index of the last element along an ndarray dimension which passes a test implemented by a predicate function and assigns the results to a provided output ndarray.\n*\n* @param {ndarrayLike} x - input ndarray\n* @param {ndarrayLike} out - output ndarray\n* @param {Options} [options] - function options\n* @param {integer} [options.dim=-1] - dimension over which to perform operation\n* @param {Function} clbk - callback function\n* @param {*} [thisArg] - callback execution context\n* @throws {TypeError} function must be provided at least three arguments\n* @throws {TypeError} first argument must be an ndarray-like object\n* @throws {TypeError} second argument must be an ndarray-like object\n* @throws {TypeError} callback argument must be a function\n* @throws {TypeError} options argument must be an object\n* @throws {RangeError} dimension index must not exceed input ndarray bounds\n* @throws {RangeError} first argument must have at least one dimension\n* @throws {Error} must provide valid options\n* @returns {ndarray} output ndarray\n*\n* @example\n* import zeros from '@stdlib/ndarray-zeros';\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import ndarray from '@stdlib/ndarray-ctor';\n*\n* function isEven( v ) {\n*     return v % 2.0 === 0.0;\n* }\n*\n* // Create data buffers:\n* var xbuf = [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ];\n*\n* // Define the shape of the input array:\n* var shape = [ 2, 3 ];\n*\n* // Define the array strides:\n* var strides = [ 3, 1 ];\n*\n* // Define the index offset:\n* var offset = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'generic', xbuf, shape, strides, offset, 'row-major' );\n*\n* // Create an output ndarray:\n* var y = zeros( [ 2 ], {\n*     'dtype': 'int32'\n* });\n*\n* // Perform operation:\n* var out = assign( x, y, isEven );\n* // returns <ndarray>\n*\n* var bool = ( out === y );\n* // returns true\n*\n* var arr = ndarray2array( out );\n* // returns [ 1, 2 ]\n*/\nfunction assign( x, out ) {\n\tvar hasOptions;\n\tvar options;\n\tvar nargs;\n\tvar opts;\n\tvar ctx;\n\tvar cb;\n\n\tnargs = arguments.length;\n\tif ( !isndarrayLike( x ) ) {\n\t\tthrow new TypeError( format( 'null4f', x ) );\n\t}\n\tif ( !isndarrayLike( out ) ) {\n\t\tthrow new TypeError( format( 'nullF1', out ) );\n\t}\n\t// Initialize an options object:\n\topts = {\n\t\t'dims': [ -1 ] // default behavior is to perform a reduction over the last dimension\n\t};\n\n\t// Initialize a flag indicating whether an `options` argument was provided:\n\thasOptions = false;\n\n\t// Case: assign( x, out, clbk )\n\tif ( nargs <= 3 ) {\n\t\tcb = arguments[ 2 ];\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null3N', cb ) );\n\t\t}\n\t}\n\t// Case: assign( x, out, ???, ??? )\n\telse if ( nargs === 4 ) {\n\t\t// Case: assign( x, out, clbk, thisArg )\n\t\tif ( isFunction( arguments[ 2 ] ) ) {\n\t\t\tcb = arguments[ 2 ];\n\t\t\tctx = arguments[ 3 ];\n\t\t}\n\t\t// Case: assign( x, out, options, clbk )\n\t\telse {\n\t\t\toptions = arguments[ 2 ];\n\t\t\tcb = arguments[ 3 ];\n\t\t\tif ( !isFunction( cb ) ) {\n\t\t\t\tthrow new TypeError( format( 'null32', cb ) );\n\t\t\t}\n\t\t\thasOptions = true;\n\t\t}\n\t}\n\t// Case: assign( x, out, options, clbk, thisArg )\n\telse {\n\t\toptions = arguments[ 2 ];\n\t\tcb = arguments[ 3 ];\n\t\tctx = arguments[ 4 ];\n\t\tif ( !isFunction( cb ) ) {\n\t\t\tthrow new TypeError( format( 'null32', cb ) );\n\t\t}\n\t\thasOptions = true;\n\t}\n\tif ( hasOptions ) {\n\t\tif ( !isPlainObject( options ) ) {\n\t\t\tthrow new TypeError( format( 'null2V', options ) );\n\t\t}\n\t\t// Resolve provided options...\n\t\tif ( hasOwnProp( options, 'dim' ) ) {\n\t\t\topts.dims[ 0 ] = options.dim;\n\t\t}\n\t}\n\tif ( ndims( x ) < 1 ) {\n\t\tthrow new RangeError( 'invalid argument. First argument must have at least one dimension.' );\n\t}\n\treturn base( x, out, opts, cb, ctx );\n}\n\n\n// EXPORTS //\n\nexport default assign;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Return the index of the last element along an ndarray dimension which passes a test implemented by a predicate function.\n*\n* @module @stdlib/blas-ext-find-last-index\n*\n* @example\n* import ndarray2array from '@stdlib/ndarray-to-array';\n* import ndarray from '@stdlib/ndarray-ctor';\n* import findLastIndex from '@stdlib/blas-ext-find-last-index';\n*\n* function isEven( v ) {\n*     return v % 2.0 === 0.0;\n* }\n*\n* // Create a data buffer:\n* var xbuf = [ 1.0, 2.0, -3.0, 4.0, -5.0, 6.0 ];\n*\n* // Define the shape of the input array:\n* var sh = [ 2, 3 ];\n*\n* // Define the array strides:\n* var sx = [ 3, 1 ];\n*\n* // Define the index offset:\n* var ox = 0;\n*\n* // Create an input ndarray:\n* var x = new ndarray( 'generic', xbuf, sh, sx, ox, 'row-major' );\n*\n* // Perform operation:\n* var out = findLastIndex( x, isEven );\n* // returns <ndarray>\n*\n* var arr = ndarray2array( out );\n* // returns [ 1, 2 ]\n*/\n\n// MODULES //\n\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport main from './main.js';\nimport assign from './assign.js';\n\n\n// MAIN //\n\nsetReadOnly( main, 'assign', assign );\n\n\n// EXPORTS //\n\nexport default main;\n\n// exports: { \"assign\": \"main.assign\" }\n"],"names":["findLastIndex","factory","default","gfindLastIndex","dtypes","output","casting","x","hasOptions","options","nargs","opts","ctx","cb","arguments","length","isndarrayLike","TypeError","format","dims","keepdims","isFunction","isPlainObject","hasOwnProp","dim","dtype","ndims","RangeError","base","assign","out","setReadOnly","main"],"mappings":";;g/BA6BA,IA6DAA,EAAAC,EAvDA,CACAC,QAAAC,GAsDA,CA7DAC,EAAA,QACAA,EAAA,6BACA,CACAC,OAAA,4BACAC,QAAA,2BCgDA,SAASN,EAAeO,GACvB,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGJ,GADAH,EAAQI,UAAUC,QACZC,EAAeT,GACpB,MAAM,IAAIU,UAAWC,EAAQ,SAAUX,IAYxC,GATAI,EAAO,CACNQ,KAAQ,EAAG,GACXC,UAAY,GAIbZ,GAAa,EAGRE,GAAS,GAEb,IAAMW,EADNR,EAAKC,UAAW,IAEf,MAAM,IAAIG,UAAWC,EAAQ,SAAUL,SAIpC,GAAe,IAAVH,EAET,GAAKW,EAAYP,UAAW,IAC3BD,EAAKC,UAAW,GAChBF,EAAME,UAAW,OAGb,CAGJ,GAFAL,EAAUK,UAAW,IAEfO,EADNR,EAAKC,UAAW,IAEf,MAAM,IAAIG,UAAWC,EAAQ,SAAUL,IAExCL,GAAa,CACb,KAGG,CAIJ,GAHAC,EAAUK,UAAW,GAErBF,EAAME,UAAW,IACXO,EAFNR,EAAKC,UAAW,IAGf,MAAM,IAAIG,UAAWC,EAAQ,SAAUL,IAExCL,GAAa,CACb,CACD,GAAKA,EAAa,CACjB,IAAMc,EAAeb,GACpB,MAAM,IAAIQ,UAAWC,EAAQ,SAAUT,IAGnCc,EAAYd,EAAS,SACzBE,EAAKQ,KAAM,GAAMV,EAAQe,KAErBD,EAAYd,EAAS,cACzBE,EAAKS,SAAWX,EAAQW,UAEpBG,EAAYd,EAAS,WACzBE,EAAKc,MAAQhB,EAAQgB,MAEtB,CACD,GAAKC,EAAOnB,GAAM,EACjB,MAAM,IAAIoB,WAAY,sEAEvB,OAAOC,EAAMrB,EAAGI,EAAME,EAAID,EAC3B,CChEA,SAASiB,EAAQtB,EAAGuB,GACnB,IAAItB,EACAC,EACAC,EACAC,EACAC,EACAC,EAGJ,GADAH,EAAQI,UAAUC,QACZC,EAAeT,GACpB,MAAM,IAAIU,UAAWC,EAAQ,SAAUX,IAExC,IAAMS,EAAec,GACpB,MAAM,IAAIb,UAAWC,EAAQ,SAAUY,IAWxC,GARAnB,EAAO,CACNQ,KAAQ,EAAG,IAIZX,GAAa,EAGRE,GAAS,GAEb,IAAMW,EADNR,EAAKC,UAAW,IAEf,MAAM,IAAIG,UAAWC,EAAQ,SAAUL,SAIpC,GAAe,IAAVH,EAET,GAAKW,EAAYP,UAAW,IAC3BD,EAAKC,UAAW,GAChBF,EAAME,UAAW,OAGb,CAGJ,GAFAL,EAAUK,UAAW,IAEfO,EADNR,EAAKC,UAAW,IAEf,MAAM,IAAIG,UAAWC,EAAQ,SAAUL,IAExCL,GAAa,CACb,KAGG,CAIJ,GAHAC,EAAUK,UAAW,GAErBF,EAAME,UAAW,IACXO,EAFNR,EAAKC,UAAW,IAGf,MAAM,IAAIG,UAAWC,EAAQ,SAAUL,IAExCL,GAAa,CACb,CACD,GAAKA,EAAa,CACjB,IAAMc,EAAeb,GACpB,MAAM,IAAIQ,UAAWC,EAAQ,SAAUT,IAGnCc,EAAYd,EAAS,SACzBE,EAAKQ,KAAM,GAAMV,EAAQe,IAE1B,CACD,GAAKE,EAAOnB,GAAM,EACjB,MAAM,IAAIoB,WAAY,sEAEvB,OAAOC,EAAMrB,EAAGuB,EAAKnB,EAAME,EAAID,EAChC,CC/FAmB,EAAAC,EAAA,SAAAH"}